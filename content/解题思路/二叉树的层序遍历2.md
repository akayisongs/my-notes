![[Pasted image 20250624234037.png]]
### 思路：
这道题要求对二叉树进行层序遍历，但顺序是从叶子节点所在层到根节点所在层，这和常规的层序遍历顺序正好相反，常规的层序遍历是从上往下，逐层从左到右访问节点，**那怎么才能实现自底向上的层序遍历呢**？能不能先进行常规的层序遍历，把结果存起来，然后再反转一下顺序呢？这个想法看起来可以实现，层序遍历通常可以用队列来实现，把根节点先放进去，然后每次取出一个节点，把它的左右子节点依次加入队列。这样就能按层次访问节点了，不过，**怎么把每层的节点值单独存起来呢**？我打算在遍历过程中，每次处理一层节点时，就创建一个数组来存储这一层的节点值。然后等遍历完所有层后，把结果数组反转一下，这样就能得到从叶子节点所在层到根节点所在层的顺序了，**但是反转数组这个操作会不会遗漏什么细节呢**？如果树的某一层只有一个节点，反转后会不会出问题？仔细一想，反转操作不会影响各层内部的顺序，因为每层的节点值已经是按从左到右的顺序存储的了，所以反转整个结果数组应该是安全的，那接下来，我得考虑一下代码的实现，首先得定义二叉树节点的结构，包含节点值、左子节点和右子节点的指针，然后创建一个队列来存放待处理的节点，队列的大小可以先设大一点，接着我得初始化队列，把根节点放进去。如果有左右子节点，就把它们依次加入队列，在遍历过程中，我得记录下每层的节点值，每次处理一层时，先确定这一层有多少个节点，然后创建一个数组来存储这些节点的值，处理完一层后，把这个数组加入结果数组，等所有层都处理完后，再反转结果数组，得到最终的自底向上的层序遍历结果。
### 细节：
- **如何在遍历过程中识别和区分不同的层**？
    在每次处理一层节点之前，先记录下当前队列中的元素数量，这个数量就是当前层的节点数，然后依次从队列中取出这些数量的节点进行处理，并将它们的子节点加入队列，这样就能确保每层的节点被分开处理，并且每层的节点值可以单独存储。
- **如何在遍历时保持每层节点的从左到右顺序**？
    由于队列的先进先出特性，当处理一个节点时，先将它的左子节点加入队列，然后再加入右子节点，这样可以确保同一层的节点按照从左到右的顺序被访问和存储。
### 步骤：
1. 检查根节点是否为空，如果根节点为空，直接返回空的结果数组；
2. 初始化队列，创建一个队列，将根节点加入队列中，队列用于辅助层序遍历；
3. 创建一个结果数组，用于存储每层的节点值，进入循环，直到队列为空，获取当前层的节点，创建一个临时数组，用于存储当前层的节点值，从队列中取出一个节点，将该节点的值加入临时数组，如果节点有左子节点，将左子节点加入队列，如果节点有右子节点，将右子节点加入队列，将临时数组加入结果数组；
4. 反转结果数组，将结果数组进行反转，使顺序从自顶向下变为自底向上；
5. 返回反转后的结果数组，并提供必要的返回信息。
下面是代码的具体实现：
![[Pasted image 20250625000942.png]]
### 知识点：
二叉树、层序遍历
