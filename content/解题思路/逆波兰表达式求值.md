![[Pasted image 20250625141842.png]]
### 思路：
这道题要求将字符串数组中按照逆波兰表达式存储的字符求值，首先，**逆波兰表达式是什么意思呢**？上网查了之后发现逆波兰表达式又叫后缀表达式，这让我瞬间想到了当时学数据结构时，通过栈的特性将中缀表达式和后缀表达式互相转换的例子，**是否可以将栈使用到这道题目上呢**？按照之前的思路我们首先要初始化一个空栈，是操作数栈，**那么出栈入栈分别是在什么时候，又代表着什么呢**？当我们逐一扫描`token`字符串内的字符时，当扫描出来的字符为数字时，应将其对操作数栈入栈，如果扫描出来的字符为运算符时，就从操作数中出栈两个元素，按照出栈顺序的逆序将二者放入运算符的两侧进行运算，**那么如果遇到一个运算符的操作数为一个表达式怎么办呢**？其实按照上面的步骤已经将该作为操作数的表达式值求出来了，只需要再将该值对操作数栈入栈即可，能看出上面的过程为一个循环过程，**那么什么时候该循环停止呢**？当扫描到字符串中的‘\0’即可停止，最后将最后一个操作数栈中的元素出栈即为我们要输出的值了。
### 细节：
- **如何判断扫描出来的字符为数字类型字符串呢**？
    我们需要分为两种情况来讨论，第一种是字符串长度超过1，那么其一定为数字类型字符串，因为运算符只占一个字符位；第二种如果字符串长度为1，则将判断的条件设为`>='0' && <='9'`即可轻松判断。
- **在算法的什么时间点、又如何处理数字字符与运算数字之间的关系呢**？
    由于后面对栈的操作以及运算时涉及整数的部分较多，那么干脆即可在入栈前将各运算数转化为整数再进行入栈，由于转化时可能遇到不只一位的数，我们需要判断其长度是否大于一，大于一则需要逐步乘10再加上下一位即可，注意转化的时候尽量强制转成整形变量，确保不会发生错误。
- **如何将运算符转化为运算的操作呢**？
    我们可以用一个`switch`选择结构进行处理不同情况，同样这里可以包装成一个函数来解决。
- **将运算符转化为操作时要注意什么呢**？
    要注意先出栈的为右运算数，后出栈的为左操作数。
### 步骤：
1. **栈初始化**：动态分配内存存储中间结果
    - `int* stack = (int*)malloc(tokensSize * sizeof(int))`
2. **遍历token数组**：
    - 对每个元素判断是运算符还是操作数
3. **运算符处理流程**：
    - 弹出右操作数 → 弹出左操作数
    - 执行运算（注意操作数顺序）
    - 结果压回栈中
    - _除法自动向零截断_：C语言整数除法天然符合要求
4. **操作数处理**：
    - 使用函数转换字符串为整数
    - 自动处理负数字符串（如`"-123"`）
    - 压入栈中
5. **返回结果**：
    - 栈中最后剩余的元素即为结果
    - 释放动态分配的内存
下面是代码的具体实现：
![[Pasted image 20250625175450.png]]
![[Pasted image 20250625175523.png]]
### 知识点：
栈、字符串、分治思想