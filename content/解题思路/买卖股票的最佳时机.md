![[Pasted image 20250610214933.png]]

### 思路：
面对股票价格每日波动，如何设计交易策略才能实现利润最大化？关键在于理解交易规则的核心约束：我们最多只能持有一股股票，但允许在同一天完成买入和卖出操作。这意味着不必拘泥于单次交易，而应通过多次交易捕捉价格波动中的所有盈利机会。那么具体该如何操作呢？这里需要突破传统"低买高卖"的思维局限，当股票价格呈现连续上升趋势时，拆分多次小交易的收益其实等同于单次长期持有的收益。以价格序列[1,2,3,4,5]为例：若只在第1天买入第5天卖出获利4元，但拆分成(1买2卖)+(2买3卖)+(3买4卖)+(4买5卖)四笔交易同样获利4元却更灵活；更重要的是在波动行情如[7,1,5,3,6,4]中，若执着于在最低点1元买入最高点6元卖出，反而会错过中间的5元卖出机会，导致实际收益低于最优值7元。为确保捕捉所有盈利机会，我们采用逐日比较的贪心策略：只要今日价格高于昨日，就执行"昨日买入今日卖出"的微交易。这个策略的精妙之处在于它将整个价格序列分解为连续的局部决策：当价格连续上涨时，每日交易的累计收益自然等于起终点价差；当价格下跌时自动跳过交易避免亏损。例如处理[7,1,5,3,6,4]时，系统捕获1→5和3→6两个上升段，跳过7→1和5→3两个下跌段，完美匹配最优交易路径。数学证明该策略不会遗漏任何收益，因为最大利润公式P=Σmax(0,prices[i]-prices[i-1])确保收集所有正价格差，任何试图延迟卖出等待更高点的策略都存在风险，若后续价格下跌反而会减少收益，而当日锁定利润的策略既规避下跌风险，又因交易次数无限制而不会错过机会。最终实现这个策略只需时间复杂度O(n)的单次遍历，初始化利润为0，从第二天开始若当日价格高于前日，立即将差价累加到总利润。这个简洁算法不需要复杂状态管理，却能在处理数万条价格数据时保持高效，完美满足题目要求，其强大之处在于将看似复杂的交易决策转化为直观的每日价格比较，在遵守交易规则的前提下实现了理论上的利润极限。
### 步骤：
1. 我们初始化最大利润变量为0，为后续利润累加做好准备；
2. 从第二天开始遍历整个股票价格序列，逐日比较当日价格与前一日价格。当发现今日价格高于昨日价格时，我们立即执行交易操作——在昨日虚拟买入并在今日卖出，并将产生的正差价（今日价格减昨日价格）累加到总利润中，当遇到价格下跌时（如今日价格≤昨日价格），我们自动跳过交易避免亏损；
3. 在遍历完成后，将所有正差价累加得到的总额就是理论上的最大利润。
下面是代码的具体实现：
![[Pasted image 20250611010126.png]]
### 知识点：
贪心、数组